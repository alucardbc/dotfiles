(function() {
  describe('editor-linter', function() {
    var EditorLinter, editorLinter, getMessage, ref, textEditor, wait;
    ref = require('./common'), getMessage = ref.getMessage, wait = ref.wait;
    EditorLinter = require('../lib/editor-linter');
    editorLinter = null;
    textEditor = null;
    beforeEach(function() {
      global.setTimeout = require('remote').getGlobal('setTimeout');
      global.setInterval = require('remote').getGlobal('setInterval');
      return waitsForPromise(function() {
        atom.workspace.destroyActivePaneItem();
        return atom.workspace.open(__dirname + '/fixtures/file.txt').then(function() {
          if (editorLinter != null) {
            editorLinter.dispose();
          }
          textEditor = atom.workspace.getActiveTextEditor();
          return editorLinter = new EditorLinter(textEditor);
        });
      });
    });
    describe('::constructor', function() {
      return it("cries when provided argument isn't a TextEditor", function() {
        expect(function() {
          return new EditorLinter;
        }).toThrow();
        expect(function() {
          return new EditorLinter(null);
        }).toThrow();
        return expect(function() {
          return new EditorLinter(55);
        }).toThrow();
      });
    });
    describe('::{add, remove}Message', function() {
      return it('adds/removes decorations from the editor', function() {
        var countDecorations, message;
        countDecorations = textEditor.getDecorations().length;
        editorLinter.underlineIssues = true;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        editorLinter.addMessage(message);
        expect(textEditor.getDecorations().length).toBe(countDecorations + 1);
        editorLinter.deleteMessage(message);
        return expect(textEditor.getDecorations().length).toBe(countDecorations);
      });
    });
    describe('::getMessages', function() {
      return it('returns a set of messages', function() {
        var message, messageSet;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        messageSet = editorLinter.getMessages();
        editorLinter.addMessage(message);
        expect(messageSet.has(message)).toBe(true);
        editorLinter.deleteMessage(message);
        return expect(messageSet.has(message)).toBe(false);
      });
    });
    describe('::onDidMessage{Add, Change, Delete}', function() {
      return it('notifies us of the changes to messages', function() {
        var message, messageAdd, messageChange, messageRemove;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        messageAdd = jasmine.createSpy('messageAdd');
        messageChange = jasmine.createSpy('messageChange');
        messageRemove = jasmine.createSpy('messageRemove');
        editorLinter.onDidMessageAdd(messageAdd);
        editorLinter.onDidMessageChange(messageChange);
        editorLinter.onDidMessageDelete(messageRemove);
        editorLinter.addMessage(message);
        expect(messageAdd).toHaveBeenCalled();
        expect(messageAdd).toHaveBeenCalledWith(message);
        expect(messageChange).toHaveBeenCalled();
        expect(messageChange.mostRecentCall.args[0].type).toBe('add');
        expect(messageChange.mostRecentCall.args[0].message).toBe(message);
        editorLinter.deleteMessage(message);
        expect(messageRemove).toHaveBeenCalled();
        expect(messageRemove).toHaveBeenCalledWith(message);
        expect(messageChange.mostRecentCall.args[0].type).toBe('delete');
        return expect(messageChange.mostRecentCall.args[0].message).toBe(message);
      });
    });
    describe('::active', function() {
      return it('updates currentFile attribute on the messages', function() {
        var message;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        editorLinter.addMessage(message);
        expect(message.currentFile).toBe(true);
        editorLinter.active = false;
        expect(message.currentFile).toBe(false);
        editorLinter.deleteMessage(message);
        editorLinter.addMessage(message);
        return expect(message.currentFile).toBe(false);
      });
    });
    describe('::{calculateLineMessages, onDidCalculateLineMessages}', function() {
      return it('works and also ignores', function() {
        var listener, message;
        listener = jasmine.createSpy('onDidCalculateLineMessages');
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        editorLinter.addMessage(message);
        editorLinter.onDidCalculateLineMessages(listener);
        atom.config.set('linter.showErrorTabLine', true);
        expect(editorLinter.calculateLineMessages(0)).toBe(1);
        expect(editorLinter.countLineMessages).toBe(1);
        expect(listener).toHaveBeenCalledWith(1);
        atom.config.set('linter.showErrorTabLine', false);
        expect(editorLinter.calculateLineMessages(0)).toBe(0);
        expect(editorLinter.countLineMessages).toBe(0);
        expect(listener).toHaveBeenCalledWith(0);
        atom.config.set('linter.showErrorTabLine', true);
        expect(editorLinter.calculateLineMessages(0)).toBe(1);
        expect(editorLinter.countLineMessages).toBe(1);
        return expect(listener).toHaveBeenCalledWith(1);
      });
    });
    describe('::{handle, add, remove}Gutter', function() {
      return it('handles the attachment and detachment of gutter to text editor', function() {
        editorLinter.gutterEnabled = false;
        expect(editorLinter.gutter === null).toBe(true);
        editorLinter.gutterEnabled = true;
        editorLinter.handleGutter();
        expect(editorLinter.gutter === null).toBe(false);
        editorLinter.gutterEnabled = false;
        editorLinter.handleGutter();
        expect(editorLinter.gutter === null).toBe(true);
        editorLinter.addGutter();
        expect(editorLinter.gutter === null).toBe(false);
        editorLinter.removeGutter();
        expect(editorLinter.gutter === null).toBe(true);
        editorLinter.removeGutter();
        return expect(editorLinter.gutter === null).toBe(true);
      });
    });
    describe('::onShouldLint', function() {
      it('is triggered on save', function() {
        var timesTriggered;
        timesTriggered = 0;
        editorLinter.onShouldLint(function() {
          return timesTriggered++;
        });
        textEditor.save();
        textEditor.save();
        textEditor.save();
        textEditor.save();
        textEditor.save();
        return expect(timesTriggered).toBe(5);
      });
      return it('respects lintOnFlyInterval config', function() {
        var flyStatus, timeCalled, timeDid;
        timeCalled = null;
        flyStatus = null;
        atom.config.set('linter.lintOnFlyInterval', 300);
        editorLinter.onShouldLint(function(fly) {
          flyStatus = fly;
          return timeCalled = new Date();
        });
        timeDid = new Date();
        editorLinter.editor.insertText("Hey\n");
        return waitsForPromise(function() {
          return wait(300).then(function() {
            expect(timeCalled !== null).toBe(true);
            expect(flyStatus !== null).toBe(true);
            expect(flyStatus).toBe(true);
            expect(timeCalled - timeDid).toBeLessThan(400);
            atom.config.set('linter.lintOnFlyInterval', 600);
            timeCalled = null;
            flyStatus = null;
            timeDid = new Date();
            editorLinter.editor.insertText("Hey\n");
            return wait(600);
          }).then(function() {
            expect(timeCalled !== null).toBe(true);
            expect(flyStatus !== null).toBe(true);
            expect(flyStatus).toBe(true);
            expect(timeCalled - timeDid).toBeGreaterThan(599);
            return expect(timeCalled - timeDid).toBeLessThan(700);
          });
        });
      });
    });
    return describe('::onDidDestroy', function() {
      return it('is called when TextEditor is destroyed', function() {
        var didDestroy;
        didDestroy = false;
        editorLinter.onDidDestroy(function() {
          return didDestroy = true;
        });
        textEditor.destroy();
        return expect(didDestroy).toBe(true);
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvZGRld2V5Ly5hdG9tL3BhY2thZ2VzL2xpbnRlci9zcGVjL2VkaXRvci1saW50ZXItc3BlYy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFBQSxRQUFBLENBQVMsZUFBVCxFQUEwQixTQUFBO0FBQ3hCLFFBQUE7SUFBQSxNQUFxQixPQUFBLENBQVEsVUFBUixDQUFyQixFQUFDLDJCQUFELEVBQWE7SUFDYixZQUFBLEdBQWUsT0FBQSxDQUFRLHNCQUFSO0lBQ2YsWUFBQSxHQUFlO0lBQ2YsVUFBQSxHQUFhO0lBRWIsVUFBQSxDQUFXLFNBQUE7TUFDVCxNQUFNLENBQUMsVUFBUCxHQUFvQixPQUFBLENBQVEsUUFBUixDQUFpQixDQUFDLFNBQWxCLENBQTRCLFlBQTVCO01BQ3BCLE1BQU0sQ0FBQyxXQUFQLEdBQXFCLE9BQUEsQ0FBUSxRQUFSLENBQWlCLENBQUMsU0FBbEIsQ0FBNEIsYUFBNUI7YUFDckIsZUFBQSxDQUFnQixTQUFBO1FBQ2QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxxQkFBZixDQUFBO2VBQ0EsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFmLENBQW9CLFNBQUEsR0FBWSxvQkFBaEMsQ0FBcUQsQ0FBQyxJQUF0RCxDQUEyRCxTQUFBOztZQUN6RCxZQUFZLENBQUUsT0FBZCxDQUFBOztVQUNBLFVBQUEsR0FBYSxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFmLENBQUE7aUJBQ2IsWUFBQSxHQUFtQixJQUFBLFlBQUEsQ0FBYSxVQUFiO1FBSHNDLENBQTNEO01BRmMsQ0FBaEI7SUFIUyxDQUFYO0lBVUEsUUFBQSxDQUFTLGVBQVQsRUFBMEIsU0FBQTthQUN4QixFQUFBLENBQUcsaURBQUgsRUFBc0QsU0FBQTtRQUNwRCxNQUFBLENBQU8sU0FBQTtpQkFDTCxJQUFJO1FBREMsQ0FBUCxDQUVBLENBQUMsT0FGRCxDQUFBO1FBR0EsTUFBQSxDQUFPLFNBQUE7aUJBQ0QsSUFBQSxZ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QyxDQUE3QztJQUR5QixDQUEzQjtFQTVKd0IsQ0FBMUI7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbImRlc2NyaWJlICdlZGl0b3ItbGludGVyJywgLT5cbiAge2dldE1lc3NhZ2UsIHdhaXR9ID0gcmVxdWlyZSgnLi9jb21tb24nKVxuICBFZGl0b3JMaW50ZXIgPSByZXF1aXJlKCcuLi9saWIvZWRpdG9yLWxpbnRlcicpXG4gIGVkaXRvckxpbnRlciA9IG51bGxcbiAgdGV4dEVkaXRvciA9IG51bGxcblxuICBiZWZvcmVFYWNoIC0+XG4gICAgZ2xvYmFsLnNldFRpbWVvdXQgPSByZXF1aXJlKCdyZW1vdGUnKS5nZXRHbG9iYWwoJ3NldFRpbWVvdXQnKVxuICAgIGdsb2JhbC5zZXRJbnRlcnZhbCA9IHJlcXVpcmUoJ3JlbW90ZScpLmdldEdsb2JhbCgnc2V0SW50ZXJ2YWwnKVxuICAgIHdhaXRzRm9yUHJvbWlzZSAtPlxuICAgICAgYXRvbS53b3Jrc3BhY2UuZGVzdHJveUFjdGl2ZVBhbmVJdGVtKClcbiAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4oX19kaXJuYW1lICsgJy9maXh0dXJlcy9maWxlLnR4dCcpLnRoZW4gLT5cbiAgICAgICAgZWRpdG9yTGludGVyPy5kaXNwb3NlKClcbiAgICAgICAgdGV4dEVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKVxuICAgICAgICBlZGl0b3JMaW50ZXIgPSBuZXcgRWRpdG9yTGludGVyKHRleHRFZGl0b3IpXG5cbiAgZGVzY3JpYmUgJzo6Y29uc3RydWN0b3InLCAtPlxuICAgIGl0IFwiY3JpZXMgd2hlbiBwcm92aWRlZCBhcmd1bWVudCBpc24ndCBhIFRleHRFZGl0b3JcIiwgLT5cbiAgICAgIGV4cGVjdCAtPlxuICAgICAgICBuZXcgRWRpdG9yTGludGVyXG4gICAgICAudG9UaHJvdygpXG4gICAgICBleHBlY3QgLT5cbiAgICAgICAgbmV3IEVkaXRvckxpbnRlcihudWxsKVxuICAgICAgLnRvVGhyb3coKVxuICAgICAgZXhwZWN0IC0+XG4gICAgICAgIG5ldyBFZGl0b3JMaW50ZXIoNTUpXG4gICAgICAudG9UaHJvdygpXG5cbiAgZGVzY3JpYmUgJzo6e2FkZCwgcmVtb3ZlfU1lc3NhZ2UnLCAtPlxuICAgIGl0ICdhZGRzL3JlbW92ZXMgZGVjb3JhdGlvbnMgZnJvbSB0aGUgZWRpdG9yJywgLT5cbiAgICAgIGNvdW50RGVjb3JhdGlvbnMgPSB0ZXh0RWRpdG9yLmdldERlY29yYXRpb25zKCkubGVuZ3RoXG4gICAgICBlZGl0b3JMaW50ZXIudW5kZXJsaW5lSXNzdWVzID0gdHJ1ZVxuICAgICAgbWVzc2FnZSA9IGdldE1lc3NhZ2UoJ0hleSEnLCBfX2Rpcm5hbWUgKyAnL2ZpeHR1cmVzL2ZpbGUudHh0JywgW1swLCAxXSwgWzAsIDJdXSlcbiAgICAgIGVkaXRvckxpbnRlci5hZGRNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBleHBlY3QodGV4dEVkaXRvci5nZXREZWNvcmF0aW9ucygpLmxlbmd0aCkudG9CZShjb3VudERlY29yYXRpb25zICsgMSlcbiAgICAgIGVkaXRvckxpbnRlci5kZWxldGVNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBleHBlY3QodGV4dEVkaXRvci5nZXREZWNvcmF0aW9ucygpLmxlbmd0aCkudG9CZShjb3VudERlY29yYXRpb25zKVxuXG4gIGRlc2NyaWJlICc6OmdldE1lc3NhZ2VzJywgLT5cbiAgICBpdCAncmV0dXJucyBhIHNldCBvZiBtZXNzYWdlcycsIC0+XG4gICAgICBtZXNzYWdlID0gZ2V0TWVzc2FnZSgnSGV5IScsIF9fZGlybmFtZSArICcvZml4dHVyZXMvZmlsZS50eHQnLCBbWzAsIDFdLCBbMCwgMl1dKVxuICAgICAgbWVzc2FnZVNldCA9IGVkaXRvckxpbnRlci5nZXRNZXNzYWdlcygpXG4gICAgICBlZGl0b3JMaW50ZXIuYWRkTWVzc2FnZShtZXNzYWdlKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VTZXQuaGFzKG1lc3NhZ2UpKS50b0JlKHRydWUpXG4gICAgICBlZGl0b3JMaW50ZXIuZGVsZXRlTWVzc2FnZShtZXNzYWdlKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VTZXQuaGFzKG1lc3NhZ2UpKS50b0JlKGZhbHNlKVxuXG4gIGRlc2NyaWJlICc6Om9uRGlkTWVzc2FnZXtBZGQsIENoYW5nZSwgRGVsZXRlfScsIC0+XG4gICAgaXQgJ25vdGlmaWVzIHVzIG9mIHRoZSBjaGFuZ2VzIHRvIG1lc3NhZ2VzJywgLT5cbiAgICAgIG1lc3NhZ2UgPSBnZXRNZXNzYWdlKCdIZXkhJywgX19kaXJuYW1lICsgJy9maXh0dXJlcy9maWxlLnR4dCcsIFtbMCwgMV0sIFswLCAyXV0pXG4gICAgICBtZXNzYWdlQWRkID0gamFzbWluZS5jcmVhdGVTcHkoJ21lc3NhZ2VBZGQnKVxuICAgICAgbWVzc2FnZUNoYW5nZSA9IGphc21pbmUuY3JlYXRlU3B5KCdtZXNzYWdlQ2hhbmdlJylcbiAgICAgIG1lc3NhZ2VSZW1vdmUgPSBqYXNtaW5lLmNyZWF0ZVNweSgnbWVzc2FnZVJlbW92ZScpXG4gICAgICBlZGl0b3JMaW50ZXIub25EaWRNZXNzYWdlQWRkKG1lc3NhZ2VBZGQpXG4gICAgICBlZGl0b3JMaW50ZXIub25EaWRNZXNzYWdlQ2hhbmdlKG1lc3NhZ2VDaGFuZ2UpXG4gICAgICBlZGl0b3JMaW50ZXIub25EaWRNZXNzYWdlRGVsZXRlKG1lc3NhZ2VSZW1vdmUpXG4gICAgICBlZGl0b3JMaW50ZXIuYWRkTWVzc2FnZShtZXNzYWdlKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VBZGQpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VBZGQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1lc3NhZ2UpXG4gICAgICBleHBlY3QobWVzc2FnZUNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICBleHBlY3QobWVzc2FnZUNoYW5nZS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdLnR5cGUpLnRvQmUoJ2FkZCcpXG4gICAgICBleHBlY3QobWVzc2FnZUNoYW5nZS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdLm1lc3NhZ2UpLnRvQmUobWVzc2FnZSlcbiAgICAgIGVkaXRvckxpbnRlci5kZWxldGVNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBleHBlY3QobWVzc2FnZVJlbW92ZSkudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICBleHBlY3QobWVzc2FnZVJlbW92ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgobWVzc2FnZSlcbiAgICAgIGV4cGVjdChtZXNzYWdlQ2hhbmdlLm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0udHlwZSkudG9CZSgnZGVsZXRlJylcbiAgICAgIGV4cGVjdChtZXNzYWdlQ2hhbmdlLm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0ubWVzc2FnZSkudG9CZShtZXNzYWdlKVxuXG4gIGRlc2NyaWJlICc6OmFjdGl2ZScsIC0+XG4gICAgaXQgJ3VwZGF0ZXMgY3VycmVudEZpbGUgYXR0cmlidXRlIG9uIHRoZSBtZXNzYWdlcycsIC0+XG4gICAgICBtZXNzYWdlID0gZ2V0TWVzc2FnZSgnSGV5IScsIF9fZGlybmFtZSArICcvZml4dHVyZXMvZmlsZS50eHQnLCBbWzAsIDFdLCBbMCwgMl1dKVxuICAgICAgZWRpdG9yTGludGVyLmFkZE1lc3NhZ2UobWVzc2FnZSlcbiAgICAgIGV4cGVjdChtZXNzYWdlLmN1cnJlbnRGaWxlKS50b0JlKHRydWUpXG4gICAgICBlZGl0b3JMaW50ZXIuYWN0aXZlID0gZmFsc2VcbiAgICAgIGV4cGVjdChtZXNzYWdlLmN1cnJlbnRGaWxlKS50b0JlKGZhbHNlKVxuICAgICAgZWRpdG9yTGludGVyLmRlbGV0ZU1lc3NhZ2UobWVzc2FnZSlcbiAgICAgIGVkaXRvckxpbnRlci5hZGRNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBleHBlY3QobWVzc2FnZS5jdXJyZW50RmlsZSkudG9CZShmYWxzZSlcblxuICBkZXNjcmliZSAnOjp7Y2FsY3VsYXRlTGluZU1lc3NhZ2VzLCBvbkRpZENhbGN1bGF0ZUxpbmVNZXNzYWdlc30nLCAtPlxuICAgIGl0ICd3b3JrcyBhbmQgYWxzbyBpZ25vcmVzJywgLT5cbiAgICAgIGxpc3RlbmVyID0gamFzbWluZS5jcmVhdGVTcHkoJ29uRGlkQ2FsY3VsYXRlTGluZU1lc3NhZ2VzJylcbiAgICAgIG1lc3NhZ2UgPSBnZXRNZXNzYWdlKCdIZXkhJywgX19kaXJuYW1lICsgJy9maXh0dXJlcy9maWxlLnR4dCcsIFtbMCwgMV0sIFswLCAyXV0pXG4gICAgICBlZGl0b3JMaW50ZXIuYWRkTWVzc2FnZShtZXNzYWdlKVxuICAgICAgZWRpdG9yTGludGVyLm9uRGlkQ2FsY3VsYXRlTGluZU1lc3NhZ2VzKGxpc3RlbmVyKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXIuc2hvd0Vycm9yVGFiTGluZScsIHRydWUpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmNhbGN1bGF0ZUxpbmVNZXNzYWdlcygwKSkudG9CZSgxKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5jb3VudExpbmVNZXNzYWdlcykudG9CZSgxKVxuICAgICAgZXhwZWN0KGxpc3RlbmVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXIuc2hvd0Vycm9yVGFiTGluZScsIGZhbHNlKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5jYWxjdWxhdGVMaW5lTWVzc2FnZXMoMCkpLnRvQmUoMClcbiAgICAgIGV4cGVjdChlZGl0b3JMaW50ZXIuY291bnRMaW5lTWVzc2FnZXMpLnRvQmUoMClcbiAgICAgIGV4cGVjdChsaXN0ZW5lcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoMClcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLnNob3dFcnJvclRhYkxpbmUnLCB0cnVlKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5jYWxjdWxhdGVMaW5lTWVzc2FnZXMoMCkpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChlZGl0b3JMaW50ZXIuY291bnRMaW5lTWVzc2FnZXMpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChsaXN0ZW5lcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoMSlcblxuICBkZXNjcmliZSAnOjp7aGFuZGxlLCBhZGQsIHJlbW92ZX1HdXR0ZXInLCAtPlxuICAgIGl0ICdoYW5kbGVzIHRoZSBhdHRhY2htZW50IGFuZCBkZXRhY2htZW50IG9mIGd1dHRlciB0byB0ZXh0IGVkaXRvcicsIC0+XG4gICAgICBlZGl0b3JMaW50ZXIuZ3V0dGVyRW5hYmxlZCA9IGZhbHNlXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmd1dHRlciBpcyBudWxsKS50b0JlKHRydWUpXG4gICAgICBlZGl0b3JMaW50ZXIuZ3V0dGVyRW5hYmxlZCA9IHRydWVcbiAgICAgIGVkaXRvckxpbnRlci5oYW5kbGVHdXR0ZXIoKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5ndXR0ZXIgaXMgbnVsbCkudG9CZShmYWxzZSlcbiAgICAgIGVkaXRvckxpbnRlci5ndXR0ZXJFbmFibGVkID0gZmFsc2VcbiAgICAgIGVkaXRvckxpbnRlci5oYW5kbGVHdXR0ZXIoKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5ndXR0ZXIgaXMgbnVsbCkudG9CZSh0cnVlKVxuICAgICAgZWRpdG9yTGludGVyLmFkZEd1dHRlcigpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmd1dHRlciBpcyBudWxsKS50b0JlKGZhbHNlKVxuICAgICAgZWRpdG9yTGludGVyLnJlbW92ZUd1dHRlcigpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmd1dHRlciBpcyBudWxsKS50b0JlKHRydWUpXG4gICAgICBlZGl0b3JMaW50ZXIucmVtb3ZlR3V0dGVyKClcbiAgICAgIGV4cGVjdChlZGl0b3JMaW50ZXIuZ3V0dGVyIGlzIG51bGwpLnRvQmUodHJ1ZSlcblxuICBkZXNjcmliZSAnOjpvblNob3VsZExpbnQnLCAtPlxuICAgIGl0ICdpcyB0cmlnZ2VyZWQgb24gc2F2ZScsIC0+XG4gICAgICB0aW1lc1RyaWdnZXJlZCA9IDBcbiAgICAgIGVkaXRvckxpbnRlci5vblNob3VsZExpbnQgLT5cbiAgICAgICAgdGltZXNUcmlnZ2VyZWQrK1xuICAgICAgdGV4dEVkaXRvci5zYXZlKClcbiAgICAgIHRleHRFZGl0b3Iuc2F2ZSgpXG4gICAgICB0ZXh0RWRpdG9yLnNhdmUoKVxuICAgICAgdGV4dEVkaXRvci5zYXZlKClcbiAgICAgIHRleHRFZGl0b3Iuc2F2ZSgpXG4gICAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoNSlcbiAgICBpdCAncmVzcGVjdHMgbGludE9uRmx5SW50ZXJ2YWwgY29uZmlnJywgLT5cbiAgICAgIHRpbWVDYWxsZWQgPSBudWxsXG4gICAgICBmbHlTdGF0dXMgPSBudWxsXG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci5saW50T25GbHlJbnRlcnZhbCcsIDMwMClcbiAgICAgIGVkaXRvckxpbnRlci5vblNob3VsZExpbnQgKGZseSkgLT5cbiAgICAgICAgZmx5U3RhdHVzID0gZmx5XG4gICAgICAgIHRpbWVDYWxsZWQgPSBuZXcgRGF0ZSgpXG4gICAgICB0aW1lRGlkID0gbmV3IERhdGUoKVxuICAgICAgZWRpdG9yTGludGVyLmVkaXRvci5pbnNlcnRUZXh0KFwiSGV5XFxuXCIpXG4gICAgICB3YWl0c0ZvclByb21pc2UgLT5cbiAgICAgICAgd2FpdCgzMDApLnRoZW4gLT5cbiAgICAgICAgICBleHBlY3QodGltZUNhbGxlZCBpc250IG51bGwpLnRvQmUodHJ1ZSlcbiAgICAgICAgICBleHBlY3QoZmx5U3RhdHVzIGlzbnQgbnVsbCkudG9CZSh0cnVlKVxuICAgICAgICAgIGV4cGVjdChmbHlTdGF0dXMpLnRvQmUodHJ1ZSlcbiAgICAgICAgICBleHBlY3QodGltZUNhbGxlZCAtIHRpbWVEaWQpLnRvQmVMZXNzVGhhbig0MDApXG5cbiAgICAgICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci5saW50T25GbHlJbnRlcnZhbCcsIDYwMClcbiAgICAgICAgICB0aW1lQ2FsbGVkID0gbnVsbFxuICAgICAgICAgIGZseVN0YXR1cyA9IG51bGxcbiAgICAgICAgICB0aW1lRGlkID0gbmV3IERhdGUoKVxuICAgICAgICAgIGVkaXRvckxpbnRlci5lZGl0b3IuaW5zZXJ0VGV4dChcIkhleVxcblwiKVxuXG4gICAgICAgICAgd2FpdCg2MDApXG4gICAgICAgIC50aGVuIC0+XG4gICAgICAgICAgZXhwZWN0KHRpbWVDYWxsZWQgaXNudCBudWxsKS50b0JlKHRydWUpXG4gICAgICAgICAgZXhwZWN0KGZseVN0YXR1cyBpc250IG51bGwpLnRvQmUodHJ1ZSlcbiAgICAgICAgICBleHBlY3QoZmx5U3RhdHVzKS50b0JlKHRydWUpXG4gICAgICAgICAgZXhwZWN0KHRpbWVDYWxsZWQgLSB0aW1lRGlkKS50b0JlR3JlYXRlclRoYW4oNTk5KVxuICAgICAgICAgIGV4cGVjdCh0aW1lQ2FsbGVkIC0gdGltZURpZCkudG9CZUxlc3NUaGFuKDcwMClcblxuICBkZXNjcmliZSAnOjpvbkRpZERlc3Ryb3knLCAtPlxuICAgIGl0ICdpcyBjYWxsZWQgd2hlbiBUZXh0RWRpdG9yIGlzIGRlc3Ryb3llZCcsIC0+XG4gICAgICBkaWREZXN0cm95ID0gZmFsc2VcbiAgICAgIGVkaXRvckxpbnRlci5vbkRpZERlc3Ryb3kgLT5cbiAgICAgICAgZGlkRGVzdHJveSA9IHRydWVcbiAgICAgIHRleHRFZGl0b3IuZGVzdHJveSgpXG4gICAgICBleHBlY3QoZGlkRGVzdHJveSkudG9CZSh0cnVlKVxuIl19
